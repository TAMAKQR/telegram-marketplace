# –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–ø–ª–∞—Ç

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –ø—É–±–ª–∏–∫—É–µ—Ç –ø–æ—Å—Ç
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫–∞
- –ü—É–±–ª–∏–∫—É–µ—Ç –ø–æ—Å—Ç/reels –≤ —Å–≤–æ–µ–º Instagram
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ—Å—Ç —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ Instagram Business API:
- **–û—Ö–≤–∞—Ç (Reach)** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —É–≤–∏–¥–µ–ª–∏ –ø–æ—Å—Ç
- **–ü–æ–∫–∞–∑—ã (Impressions)** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- **–í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å (Engagement)** - –ª–∞–π–∫–∏ + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ + —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è + —Ä–µ–ø–æ—Å—Ç—ã
- **–õ–∞–π–∫–∏** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è** - —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏
- **–†–µ–ø–æ—Å—Ç—ã** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Å—ã–ª–æ–∫

### 3. –†–∞—Å—á–µ—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø–æ —Ñ–æ—Ä–º—É–ª–µ:

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–ø–ª–∞—Ç–∞ = –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ + –ë–æ–Ω—É—Å**

#### –ë–æ–Ω—É—Å—ã –∑–∞ –æ—Ö–≤–∞—Ç:
- –ö–∞–∂–¥—ã–µ 1000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ = +100 ‚Ç∏

#### –ë–æ–Ω—É—Å—ã –∑–∞ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å (Engagement Rate):
- ER >= 5% ‚Üí +50% –∫ –±–∞–∑–æ–≤–æ–π —Å—Ç–∞–≤–∫–µ
- ER >= 3% ‚Üí +30% –∫ –±–∞–∑–æ–≤–æ–π —Å—Ç–∞–≤–∫–µ  
- ER >= 1% ‚Üí +10% –∫ –±–∞–∑–æ–≤–æ–π —Å—Ç–∞–≤–∫–µ

*Engagement Rate = (–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è / –û—Ö–≤–∞—Ç) √ó 100%*

#### –ü—Ä–∏–º–µ—Ä:
```
–ë–∞–∑–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞: 5000 ‚Ç∏
–û—Ö–≤–∞—Ç: 3500 —á–µ–ª–æ–≤–µ–∫
–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è: 200 (–ª–∞–π–∫–∏ + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)

Engagement Rate = (200 / 3500) √ó 100% = 5.7%

–ë–æ–Ω—É—Å –∑–∞ –æ—Ö–≤–∞—Ç: (3500 / 1000) √ó 100 = 300 ‚Ç∏
–ë–æ–Ω—É—Å –∑–∞ ER 5%+: 5000 √ó 0.5 = 2500 ‚Ç∏

–ò—Ç–æ–≥–æ –∫ –≤—ã–ø–ª–∞—Ç–µ: 5000 + 300 + 2500 = 7800 ‚Ç∏
```

### 4. –ü—Ä–æ—Ü–µ—Å—Å –æ–¥–æ–±—Ä–µ–Ω–∏—è –∏ –æ–ø–ª–∞—Ç—ã

1. **Pending** - –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –æ—Ç–ø—Ä–∞–≤–∏–ª –ø–æ—Å—Ç ‚Üí –∑–∞–∫–∞–∑—á–∏–∫ –≤–∏–¥–∏—Ç –º–µ—Ç—Ä–∏–∫–∏
2. **Approved** - –ó–∞–∫–∞–∑—á–∏–∫ –æ–¥–æ–±—Ä—è–µ—Ç –ø–æ—Å—Ç ‚Üí —Ä–∞—Å—á–µ—Ç –±–æ–Ω—É—Å–æ–≤
3. **Paid** - –ó–∞–∫–∞–∑—á–∏–∫ –Ω–∞–∂–∏–º–∞–µ—Ç "–í—ã–ø–ª–∞—Ç–∏—Ç—å" ‚Üí –¥–µ–Ω—å–≥–∏ –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- –ó–∞–∫–∞–∑—á–∏–∫ –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –∫–Ω–æ–ø–∫–æ–π "üîÑ –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏"
- –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç –±–æ–Ω—É—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª–µ–∑–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ 24-48 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `supabase/migrations/migration_task_posts.sql` - —Ç–∞–±–ª–∏—Ü–∞ task_posts —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á–µ—Ç–æ–º –±–æ–Ω—É—Å–æ–≤
- `supabase/functions_payments.sql` - —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –°–µ—Ä–≤–∏—Å—ã
- `src/lib/instagramMetricsService.js` - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏–∑ Instagram API

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/components/SubmitTaskPost.jsx` - —Ñ–æ—Ä–º–∞ –¥–ª—è –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–∞ (–æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ—Å—Ç–∞)
- `src/components/TaskPostsReview.jsx` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞ (–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –æ–ø–ª–∞—Ç–∞)

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –î–ª—è –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–∞ (–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–¥–∞–Ω–∏—è):
```jsx
import SubmitTaskPost from '../components/SubmitTaskPost'

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∑–∞–¥–∞–Ω–∏—è:
<SubmitTaskPost task={task} onSuccess={loadTask} />
```

### –î–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞ (–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–¥–∞–Ω–∏—è):
```jsx
import TaskPostsReview from '../components/TaskPostsReview'

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∑–∞–¥–∞–Ω–∏—è:
<TaskPostsReview taskId={task.id} />
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Supabase:
```sql
-- 1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø–æ—Å—Ç–æ–≤
\i supabase/migrations/migration_task_posts.sql

-- 2. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
\i supabase/functions_payments.sql
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è task_posts:
```sql
-- –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø–æ—Å—Ç—ã
CREATE POLICY "Influencers can view own posts"
ON task_posts FOR SELECT
USING (influencer_id = auth.uid());

-- –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç—ã
CREATE POLICY "Influencers can create posts"
ON task_posts FOR INSERT
WITH CHECK (influencer_id = auth.uid());

-- –ó–∞–∫–∞–∑—á–∏–∫–∏ –≤–∏–¥—è—Ç –ø–æ—Å—Ç—ã –ø–æ —Å–≤–æ–∏–º –∑–∞–¥–∞–Ω–∏—è–º
CREATE POLICY "Clients can view task posts"
ON task_posts FOR SELECT
USING (
  task_id IN (
    SELECT id FROM tasks WHERE client_id = auth.uid()
  )
);

-- –ó–∞–∫–∞–∑—á–∏–∫–∏ –º–æ–≥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å
CREATE POLICY "Clients can update post status"
ON task_posts FOR UPDATE
USING (
  task_id IN (
    SELECT id FROM tasks WHERE client_id = auth.uid()
  )
);
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Instagram Business Account —É –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–∞
- –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π Instagram —á–µ—Ä–µ–∑ OAuth (instagram_access_token)
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å —É –∑–∞–∫–∞–∑—á–∏–∫–∞ –¥–ª—è –≤—ã–ø–ª–∞—Ç—ã

## –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è:
- –ü–æ—Å—Ç–æ–≤ (IMAGE)
- Reels (VIDEO)
- Stories (STORY)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Insights –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –º–ª–∞–¥—à–µ 30 –¥–Ω–µ–π –∏ —Ç–æ–ª—å–∫–æ –¥–ª—è Business/Creator –∞–∫–∫–∞—É–Ω—Ç–æ–≤.
