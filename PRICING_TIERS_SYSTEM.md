# üí∞ –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –æ–ø–ª–∞—Ç—ã: –¶–µ–Ω–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### ‚ùå –°—Ç–∞—Ä–∞—è –º–æ–¥–µ–ª—å:
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç –∑–∞ –∑–∞–¥–∞–Ω–∏–µ
- –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ
- –û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –í–°–ï–• —Ü–µ–ª–µ–π

### ‚úÖ –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å:
- **–ì–∏–±–∫–∏–µ —Ü–µ–Ω–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã** - –æ–ø–ª–∞—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏** - –æ–¥–∏–Ω –∑–∞–∫–∞–∑ –º–æ–≥—É—Ç –±—Ä–∞—Ç—å –º–Ω–æ–≥–æ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤
- **–°—Ä–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫** - X –¥–Ω–µ–π –Ω–∞ –Ω–∞–±–æ—Ä –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- **–û–ø–ª–∞—Ç–∞ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É** - –¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—Å–∏–ª–∏ —Ü–µ–ª—å, –ø–ª–∞—Ç–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—É–º–º—É

## –ü—Ä–∏–º–µ—Ä—ã —Ü–µ–Ω–æ–≤—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤

### –ü—Ä–∏–º–µ—Ä 1: –û–ø–ª–∞—Ç–∞ –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã
```
–î–∏–∞–ø–∞–∑–æ–Ω 1: 2,000-10,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ = 2,000 —Å–æ–º
–î–∏–∞–ø–∞–∑–æ–Ω 2: 10,001-50,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ = 4,000 —Å–æ–º
–î–∏–∞–ø–∞–∑–æ–Ω 3: 50,001-200,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ = 10,000 —Å–æ–º
–î–∏–∞–ø–∞–∑–æ–Ω 4: 200,001-1,000,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ = 25,000 —Å–æ–º
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –Ω–∞–±—Ä–∞–ª **15,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤** ‚Üí –ø–ª–∞—Ç–∏–º **4,000 —Å–æ–º** (–¥–∏–∞–ø–∞–∑–æ–Ω 2)
- –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –Ω–∞–±—Ä–∞–ª **180,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤** ‚Üí –ø–ª–∞—Ç–∏–º **10,000 —Å–æ–º** (–¥–∏–∞–ø–∞–∑–æ–Ω 3)
- –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –Ω–∞–±—Ä–∞–ª **1,500,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤** ‚Üí –ø–ª–∞—Ç–∏–º **25,000 —Å–æ–º** (–ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω)

### –ü—Ä–∏–º–µ—Ä 2: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞ (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã + –ª–∞–π–∫–∏)
```
–ó–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã:
  5,000-20,000 = 1,500 —Å–æ–º
  20,001-100,000 = 3,000 —Å–æ–º
  
–ó–∞ –ª–∞–π–∫–∏:
  500-2,000 = 500 —Å–æ–º
  2,001-10,000 = 1,000 —Å–æ–º
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- 25,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (3,000 —Å–æ–º) + 1,500 –ª–∞–π–∫–æ–≤ (500 —Å–æ–º) = **3,500 —Å–æ–º**

## –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `tasks`

#### `pricing_tiers` (JSONB)
–ú–∞—Å—Å–∏–≤ —Ü–µ–Ω–æ–≤—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤:
```json
[
  {
    "min": 2000,
    "max": 10000,
    "price": 2000,
    "metric": "views"
  },
  {
    "min": 10001,
    "max": 50000,
    "price": 4000,
    "metric": "views"
  }
]
```

#### `metric_deadline_days` (INTEGER)
–°—Ä–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –≤ –¥–Ω—è—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 7)
```sql
metric_deadline_days = 7  -- 7 –¥–Ω–µ–π –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–π
```

#### `max_influencers` (INTEGER, nullable)
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤:
```sql
max_influencers = NULL   -- –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
max_influencers = 5      -- –º–∞–∫—Å–∏–º—É–º 5 –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤
```

#### `accepted_count` (INTEGER)
–¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–Ω—è—Ç—ã—Ö –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤:
```sql
accepted_count = 0  -- –Ω–∏–∫—Ç–æ –Ω–µ –ø—Ä–∏–Ω—è—Ç
accepted_count = 3  -- 3 –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–∞ –ø—Ä–∏–Ω—è—Ç—ã
```

### –¢–∞–±–ª–∏—Ü–∞ `task_submissions`

#### `determined_price` (DECIMAL)
–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Ü–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã—Ö –º–µ—Ç—Ä–∏–∫:
```sql
determined_price = 4000.00  -- –Ω–∞–±—Ä–∞–ª 15–ö –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Üí –¥–∏–∞–ø–∞–∑–æ–Ω 2
```

#### `metric_deadline` (TIMESTAMP)
–î–µ–¥–ª–∞–π–Ω –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫:
```sql
-- approved_at + metric_deadline_days
metric_deadline = '2026-02-03 14:00:00'
```

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è —Å —Ü–µ–Ω–æ–≤—ã–º–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏

**–ó–∞–∫–∞–∑—á–∏–∫:**
1. –í–∫–ª—é—á–∞–µ—Ç —á–µ–∫–±–æ–∫—Å "–¶–µ–Ω–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã"
2. –î–æ–±–∞–≤–ª—è–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω—ã:
   ```
   –û—Ç: 2000   –î–æ: 10000   –¶–µ–Ω–∞: 2000 —Å–æ–º   –ú–µ—Ç—Ä–∏–∫–∞: –ü—Ä–æ—Å–º–æ—Ç—Ä—ã
   –û—Ç: 10001  –î–æ: 50000   –¶–µ–Ω–∞: 4000 —Å–æ–º   –ú–µ—Ç—Ä–∏–∫–∞: –ü—Ä–æ—Å–º–æ—Ç—Ä—ã
   ```
3. –£–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ä–æ–∫: **7 –¥–Ω–µ–π**
4. –ú–∞–∫—Å–∏–º—É–º –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤: **5** (–∏–ª–∏ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É—Å—Ç—ã–º)
5. –ü—É–±–ª–∏–∫—É–µ—Ç –∑–∞–¥–∞–Ω–∏–µ

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
```sql
INSERT INTO tasks (
  pricing_tiers,
  metric_deadline_days,
  max_influencers,
  accepted_count,
  budget  -- = 0 –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è pricing_tiers
)
```

### 2. –ü—Ä–∏–Ω—è—Ç–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤

**–ó–∞–∫–∞–∑—á–∏–∫ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–∫–ª–∏–∫–æ–≤:**

```
–û—Ç–∫–ª–∏–∫ 1: –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –ê (15K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤) ‚Üí ‚úÖ –ü—Ä–∏–Ω—è—Ç
–û—Ç–∫–ª–∏–∫ 2: –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –ë (25K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤) ‚Üí ‚úÖ –ü—Ä–∏–Ω—è—Ç  
–û—Ç–∫–ª–∏–∫ 3: –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –í (10K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤) ‚Üí ‚úÖ –ü—Ä–∏–Ω—è—Ç
–û—Ç–∫–ª–∏–∫ 4: –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –ì (30K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤) ‚Üí ‚úÖ –ü—Ä–∏–Ω—è—Ç
–û—Ç–∫–ª–∏–∫ 5: –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –î (5K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤)  ‚Üí ‚úÖ –ü—Ä–∏–Ω—è—Ç
–û—Ç–∫–ª–∏–∫ 6: –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –ï (50K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤) ‚Üí ‚ùå –õ–∏–º–∏—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç (max: 5)
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
```sql
-- –ö–∞–∂–¥–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫
UPDATE tasks SET accepted_count = accepted_count + 1;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –ø–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º
IF task.max_influencers AND task.accepted_count >= task.max_influencers THEN
  RAISE EXCEPTION '–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç';
END IF;
```

### 3. –û–¥–æ–±—Ä–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ–¥–ª–∞–π–Ω–∞

**–ö–æ–≥–¥–∞ –∑–∞–∫–∞–∑—á–∏–∫ –æ–¥–æ–±—Ä—è–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏—é:**

```sql
-- –í—ã–∑–æ–≤ approve_submission()
metric_deadline = NOW() + (metric_deadline_days || ' days')::INTERVAL;

UPDATE task_submissions 
SET 
  status = 'in_progress',
  approved_at = NOW(),
  metric_deadline = NOW() + INTERVAL '7 days'
```

**–ü—Ä–∏–º–µ—Ä:**
- –û–¥–æ–±—Ä–µ–Ω–æ: 27 —è–Ω–≤–∞—Ä—è 2026, 10:00
- –î–µ–¥–ª–∞–π–Ω –º–µ—Ç—Ä–∏–∫: **3 —Ñ–µ–≤—Ä–∞–ª—è 2026, 10:00** (7 –¥–Ω–µ–π)

### 4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã

**–ö–∞–∂–¥—ã–π —á–∞—Å —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏:**

```javascript
// –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –ê –Ω–∞–±—Ä–∞–ª 15,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
update_submission_progress(
  submission_id,
  15000,  // views
  800,    // likes
  50      // comments
)
```

**–§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ü–µ–Ω—É:**
```sql
-- –ò—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω
FOR tier IN pricing_tiers LOOP
  IF 15000 BETWEEN tier.min AND tier.max AND tier.metric = 'views' THEN
    determined_price = tier.price;  -- 4000 —Å–æ–º
  END IF;
END LOOP;
```

### 5. –ê–≤—Ç–æ–æ–ø–ª–∞—Ç–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–µ–π

**–ö–æ–≥–¥–∞ –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã:**

```sql
-- 1. –ó–∞–≤–µ—Ä—à–∞–µ–º submission
UPDATE task_submissions 
SET 
  status = 'completed',
  determined_price = 4000;

-- 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø–ª–∞—Ç–∞
UPDATE users SET balance = balance - 4000 WHERE id = client_id;
UPDATE users SET balance = balance + 4000 WHERE id = influencer_id;

-- 3. –ó–∞–¥–∞–Ω–∏–µ –ù–ï –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è - –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥—Ä—É–≥–∏–µ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä—ã
-- tasks.status –æ—Å—Ç–∞–µ—Ç—Å—è 'in_progress'
```

### 6. –ü—Ä–æ—Å—Ä–æ—á–∫–∞ –¥–µ–¥–ª–∞–π–Ω–∞

**–ï—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã –∑–∞ 7 –¥–Ω–µ–π:**

```sql
-- –§—É–Ω–∫—Ü–∏—è check_expired_submissions() (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è cron job)
UPDATE task_submissions 
SET status = 'failed'
WHERE status = 'in_progress'
  AND metric_deadline < NOW();
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ùå Submission –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `failed`
- ‚ùå –û–ø–ª–∞—Ç–∞ –ù–ï –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- ‚úÖ –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –º–æ–∂–µ—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞ —Å –Ω–æ–≤—ã–º –ø–æ—Å—Ç–æ–º

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–∞ –æ–ø–ª–∞—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–¥–∏–Ω –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä, –æ–¥–∏–Ω –¥–∏–∞–ø–∞–∑–æ–Ω

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```
–î–∏–∞–ø–∞–∑–æ–Ω: 2,000-10,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ = 2,000 —Å–æ–º
–°—Ä–æ–∫: 7 –¥–Ω–µ–π
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–∞–±—Ä–∞–ª 8,500 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∑–∞ 5 –¥–Ω–µ–π ‚Üí **2,000 —Å–æ–º** ‚úÖ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä—ã, —Ä–∞–∑–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```
–î–∏–∞–ø–∞–∑–æ–Ω 1: 2,000-10,000 = 2,000 —Å–æ–º
–î–∏–∞–ø–∞–∑–æ–Ω 2: 10,001-50,000 = 4,000 —Å–æ–º
–î–∏–∞–ø–∞–∑–æ–Ω 3: 50,001-200,000 = 10,000 —Å–æ–º
Max –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤: 3
–°—Ä–æ–∫: 7 –¥–Ω–µ–π
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –ê: 8,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Üí **2,000 —Å–æ–º** ‚úÖ
- –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –ë: 35,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Üí **4,000 —Å–æ–º** ‚úÖ
- –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –í: 150,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Üí **10,000 —Å–æ–º** ‚úÖ

**–ò—Ç–æ–≥–æ:** –ó–∞–∫–∞–∑—á–∏–∫ –∑–∞–ø–ª–∞—Ç–∏–ª **16,000 —Å–æ–º**, –ø–æ–ª—É—á–∏–ª **193,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤**

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –º–∞–∫—Å–∏–º—É–º–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```
–ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω: 200,001-1,000,000 = 25,000 —Å–æ–º
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –ù–∞–±—Ä–∞–ª 2,500,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Üí –ø–ª–∞—Ç–∏–º **25,000 —Å–æ–º** (–º–∞–∫—Å–∏–º—É–º –¥–∏–∞–ø–∞–∑–æ–Ω–∞)
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –æ–ø–ª–∞—Ç—É

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```
–ó–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã:
  5,000-20,000 = 1,500 —Å–æ–º
  20,001-100,000 = 3,000 —Å–æ–º

–ó–∞ –ª–∞–π–∫–∏:
  500-2,000 = 500 —Å–æ–º
  2,001-10,000 = 1,000 —Å–æ–º
  
–°—Ä–æ–∫: 10 –¥–Ω–µ–π
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- 45,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (3,000 —Å–æ–º) + 3,500 –ª–∞–π–∫–æ–≤ (1,000 —Å–æ–º) = **4,000 —Å–æ–º** ‚úÖ

## UI/UX –∏–∑–º–µ–Ω–µ–Ω–∏—è

### CreateTask - –Ω–æ–≤—ã–µ –ø–æ–ª—è

#### –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ –æ–ø–ª–∞—Ç—ã
```
‚òê –¶–µ–Ω–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã
  –û–ø–ª–∞—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–µ—Ç—Ä–∏–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```

#### –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç (–µ—Å–ª–∏ –ù–ï –≤–∫–ª—é—á–µ–Ω—ã –¥–∏–∞–ø–∞–∑–æ–Ω—ã)
```
–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç (—Å–æ–º): [10000]
```

#### –¶–µ–Ω–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã)
```
üìä –ü—Ä–∏–º–µ—Ä: 2,000-10,000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ = 2,000 —Å–æ–º

‚îå‚îÄ –î–∏–∞–ø–∞–∑–æ–Ω 1 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ[–£–¥–∞–ª–∏—Ç—å]‚îê
‚îÇ –û—Ç: [2000]   –î–æ: [10000]                    ‚îÇ
‚îÇ –¶–µ–Ω–∞ (—Å–æ–º): [2000]                          ‚îÇ
‚îÇ –ú–µ—Ç—Ä–∏–∫–∞: [üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä—ã ‚ñº]                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

[+ –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω]
```

#### –°—Ä–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫
```
–°—Ä–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ (–¥–Ω–µ–π): [7]
‚è±Ô∏è –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –¥–æ–ª–∂–µ–Ω –¥–æ—Å—Ç–∏—á—å —Ü–µ–ª–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ 
   –∑–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è
```

#### –ú–∞–∫—Å–∏–º—É–º –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤
```
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤: [  ]
üë• –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞.
   –û–¥–∏–Ω –∑–∞–∫–∞–∑ –º–æ–≥—É—Ç –±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤.
```

### TaskDetails - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–Ω—è—Ç—ã—Ö –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–∞—Ö
```
üë• –ü—Ä–∏–Ω—è—Ç–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π: 3 –∏–∑ 5

‚úÖ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ - –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ (–æ—Å—Ç–∞–ª–æ—Å—å 4 –¥–Ω—è)
‚úÖ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤ - –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (4,000 —Å–æ–º)
‚úÖ –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ - –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ (–æ—Å—Ç–∞–ª–æ—Å—å 2 –¥–Ω—è)
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–∞–º
```
üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–í—ã–ø–æ–ª–Ω–µ–Ω–æ: 1
–í –ø—Ä–æ—Ü–µ—Å—Å–µ: 2
–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ: 0

–í—ã–ø–ª–∞—á–µ–Ω–æ: 4,000 —Å–æ–º
–û–∂–∏–¥–∞–µ—Ç—Å—è: –¥–æ 8,000 —Å–æ–º
```

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### SQL —Å–∫—Ä–∏–ø—Ç
–í—ã–ø–æ–ª–Ω–∏—Ç–µ `migration_pricing_tiers.sql` –≤ Supabase SQL Editor.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
SELECT 
  id,
  title,
  pricing_tiers,
  metric_deadline_days,
  max_influencers,
  accepted_count
FROM tasks
LIMIT 5;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞
SELECT * FROM pg_trigger WHERE tgname = 'trigger_update_accepted_count';
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ —Å –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏
- –í–∫–ª—é—á–∏—Ç—å "–¶–µ–Ω–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã"
- –î–æ–±–∞–≤–∏—Ç—å 2-3 –¥–∏–∞–ø–∞–∑–æ–Ω–∞
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ä–æ–∫: 7 –¥–Ω–µ–π
- –ú–∞–∫—Å–∏–º—É–º: 3 –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–∞

### 2. –ü—Ä–∏–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `accepted_count` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞

### 3. –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
```sql
-- –ò–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –ê –Ω–∞–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
SELECT update_submission_progress(
  'submission_id'::uuid,
  15000, 800, 50  
);

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å determined_price
SELECT determined_price FROM task_submissions WHERE id = 'submission_id';
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Å—Ä–æ—á–∫—É
```sql
-- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–¥–ª–∞–π–Ω –≤ –ø—Ä–æ—à–ª–æ–µ
UPDATE task_submissions 
SET metric_deadline = NOW() - INTERVAL '1 day'
WHERE id = 'submission_id';

-- –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É
SELECT check_expired_submissions();

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
SELECT status FROM task_submissions WHERE id = 'submission_id';
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 'failed'
```

## FAQ

### –ß—Ç–æ –µ—Å–ª–∏ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä –Ω–µ –ø–æ–ø–∞–ª –Ω–∏ –≤ –æ–¥–∏–Ω –¥–∏–∞–ø–∞–∑–æ–Ω?
–û–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. Submission –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `failed`.

### –ú–æ–∂–Ω–æ –ª–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç –∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã?
–ù–µ—Ç. –õ–∏–±–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç, –ª–∏–±–æ –¥–∏–∞–ø–∞–∑–æ–Ω—ã.

### –ß—Ç–æ –µ—Å–ª–∏ –≤—Å–µ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Ä–∞–±–æ—Ç—É?
–ó–∞–¥–∞–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è `in_progress` –ø–æ–∫–∞ –∑–∞–∫–∞–∑—á–∏–∫ –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç –µ–≥–æ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –Ω–µ –∏—Å—Ç–µ—á–µ—Ç –¥–µ–¥–ª–∞–π–Ω.

### –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏?
–ù–µ—Ç. –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.

### –ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å –ø—Ä–∏–Ω—è—Ç–æ–≥–æ –∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–∞?
–ß–µ—Ä–µ–∑ AdminPanel –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–ø–æ–∫–∞ –Ω–µ—Ç UI).
